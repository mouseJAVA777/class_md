# Process 2



### Thread

"A thread is a basic unit of CPU utilization" (CPU 수행 단위)

하나의 프로세스에서 여러 개의 Program Counter를 두는 것

* 구성 

  * Program Counter
  * Register Set
  * Stack Space (in Address Space)

* 동료 Thread와 공유하는 부분 (Task)

  * Code Section (in Address Space)
  * Data Section (in Address Space)
  * OS Resource
  * Process Status

* ==장점==

  * 응답성

    : 다중 스레드로 구성된 태스크 구조에서 하나의 서버 스레드가 Blocked 상태인 동안 동일한 Task 내의 다른 스레드가 Running되어 빠르게 처리 가능 (일종의 비동기식 입출력 가능)

  * 자원 공유

    : 동일한 일을 수행하는 다중 스레드가 협력하여 높은 처리율과 성능 향상 기대

      (주소 공간을 새로 생성하지 않으므로 메모리 자원 절약)

  * 경제성

    : 멀티 프로세스보다 멀티 스레드 (생성과 CPU 전환에 있어서 적은 부담)

  * 높은 병렬성 (멀티 프로세서의 경우)

* 종류

  * 커널 스레드 : 다중 스레드의 존재를 커널이 인지
  * 유저 스레드 : 커널은 인지하지 못하고 사용자 프로그램이 라이브러리의 지원을 받아 스스로 다중 스레드 관리
  * 리얼타임 스레드



### 프로세스와 스레드의 차이

cf) 프로그램: 어떤 작업을 위해 실행할 수 있는 파일

#### 프로세스

- 실행중인 프로그램으로 CPU의 할당을 받은 작업의 단위

  - 운영체제로부터 자원 할당

  - 할당받는 시스템 자원

    - CPU 시간
    - 운영되기 위한 주소 공간
    - Code, Data, Stack, Heap의 구조로 되어있는 독립된 메모리 영역

  - 프로세스는 서로 접근하기 위해선 IPC 통신(커널 영역)이 필요

    (스레드와 달리 별도의 자원을 할당받기 때문)

    - Ex) 파이프, 파일, 소켓 등

#### 스레드

- 프로세스의 실행 단위
  - 프로세스로부터 자원 할당
  - 프로세스의 코드/데이터/힙영역(`스택 제외`)을 공유-> 좀 더 효율적인 통신 가능
  - 다른 프로세스의 메모리에는 접근 불가능
  - 컨텍스트 스위칭시에 캐시 메모리를 비우지 않아도 됨.
  - :( 하지만, 전역변수를 사용하기 때문에 이로 인해 발생되는 문제는 염두에 둬야 함.



---



|      | 멀티 프로세스                                                | 멀티 스레드                                                  |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 장점 | 안정성 굿!<br />문제 발생시 확산되지 않음.                   | 1. 메모리 공간, 시스템 자원 소모 감소<br />2. 통신 간단<br />3. Context Switching에서의 비용 감소 (캐시 flush 필요 X)<br />=> 처리량 향상, 자원 소모 감소, 응답 시간 단축 |
| 단점 | 1. Context Switching에서의 오버헤드 <br />2. 통신을 위해선, 복잡한 IPC 통신 사용 | 1. 자원을 공유하기 때문에 다른 스레드에서 사용중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수도 있음.(동기화 문제)<br />2. 하나의 스레드에 문제 발생시 전체 프로세스가 영향 받음.<br />3. 설계 및 디버깅이 까다로움. |

